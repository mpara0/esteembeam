<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" type="text/css" href="css/frequency-pg.css" />

    <script src="http://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <script src="js/moment.min.js"></script>
    <script src="js/combodate.js"></script>

    <script src="https://use.fontawesome.com/37223d7631.js"></script>
    <script type="text/javascript" src="local-notification.js"></script>

    <title>Select Frequency</title>

</head>

<body>
    <h1>EsteemBeam</h1>
    <h3>Select frequency</h3>

    <h4>I would like a notification</h4>
    <br />
    <select id="frequency">
      <option value="minute">Every minute</option>
      <option value="hour">Hourly</option>
      <option value="day">Daily</option>
      <option value="week">Weekly</option>
      <option value="month">Monthly</option>
    </select>
    <br />

    <a href="done.html" onclick="schedule();return false;"><i class="fa fa-chevron-circle-right fa-3x" aria-hidden="true"></i></a>
    <a href="javascript:history.back();"><i class="fa fa-chevron-circle-left fa-3x" aria-hidden="true"></i></a>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
    <script>
    var schedule = function()
    {
      document.addEventListener('deviceready', function () {
           cordova.plugins.notification.local.registerPermission(function (granted) {
           });
           var user_freq = document.getElementById("frequency").options[document.getElementById("frequency")].value;
           //var now = new Date();
           var now = new Date().getTime(),
           var _5_sec_from_now = new Date(now + 5*1000);

           cordova.plugins.notification.local.schedule({
               id: 1,
               title: "EsteemBeam",
               message: "Testing",
               firstAt: _5_sec_from_now, // firstAt and at properties must be an IETF-compliant RFC 2822 timestamp
               every: "minute", // this also could be minutes i.e. 25 (int)
               sound: "file://sounds/reminder.mp3",
               icon: "http://icons.com/?cal_id=1",
               data: { meetingId:"123#fg8" }
           });

      });
    }
    </script>
</body>

</html>
